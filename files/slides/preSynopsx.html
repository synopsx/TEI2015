<!DOCTYPE html>
    <html>
      <head>
        <title>Title</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <link href="themes/remark-dark.css" rel="stylesheet" media="all" type="text/css"/>
      </head>
      <body>
        <textarea id="source">
title: Workshop Synopsx TEI2015
description: slides of the workshop
theme: themes/remark-dark.css
layout: true
class: inverse

---
name: index
class: middle center

# Workshop SynopsX

TEI2015 | 28th october 2015

.footnote[[GitHub](https://github.com/synopsx/TEI2015) | [part1](#part1) | [part2](#part2) | [part3](#part3)]

???
Thanks a lot for attending the workshop

A lightweight XQuery-based framework

Curently in development

To present the current status of the project and explore with you the usability of the project.
Collect thoughts and remarks for further dev.

Modest objectives for today :
- install the software
- explain the inner fonctionnalities
- deploy your own project with SynopsX

---

# Program

### 1. [What is SynopsX](#part1)
### 2. [A quick tour into XML databases](#part2)
### 3. [SynopsX inside](#part3)

---
name: part1
template: inverse
class: middle center

# .red[1.] What is SynopsX ?

---

# A lightweight XQuery-based framework...

### To easily publish and expose XML corpora
### A full XQuery web application built upon BaseX
### Scalable and easily customizable solution
### Brings a templating system

## Working examples on line
http://editions.ihpc.huma-num.fr/

???
# SynopsX : A lightweight XQuery-based framework to easily publish and expose XML corpora

__Initiated by the Digital humanities network of ENS Lyon (Atelier des Humanités Numériques)__, SynopsX is a lightweight framework which aimed is to easily publish and expose XML corpora.

It’s __a full XQuery web application built upon BaseX__, a native XML Database and XQuery 3.0 processor. The sources of the project are published under GNU on GitHub (h​ttps://github.com/ahn­ens­lyon/synopsx)​.

__SynopsX has been conceived as a scalable and easily customizable solution__ for HTML5 publication of XML files (TEI, EAD...).
It allows __full control over the URL scheme__ to build real REST applications and we are planning to use it to expose XML corpora in the Linked Open Data.

The software brings __a templating system__ for various renderings of resources according to predefined or customized mappings from XML data to output formats.
As different partners were involved in the development, three principles have guided the conception of the software : collaboration, mutualization and genericization. At least from this point of view, we can say that SynopsX is a fruitful example of non­institutionnal collaboration around the building of an open source software in the field of the TEI.

## Working examples on line
http://editions.ihpc.huma-num.fr/

## OAI example
http://editions.ihpc.huma-num.fr/hyperdonat/oai?verb=ListSets

---

# A non-institutionnal collaboration (free software model)

### Initiated by AHN...
research teams participating in Atelier des Humanités Numériques (AHN), ENS-Lyon

### And folks !
- ANR Ampère, Labex Passés dans le présent, etc.
- all contributors engaged in various projects related to  "instrumented corpus"

### A free software
- published under GNU General Public License >3
- Hosted on Github http://github.com/synopsx

???

# A non-institutionnal collaboration (free software model)

SynopsX is __a collective project__. Initiated by the Atelier des Humanités Numériques (Digital Humanities Workshop) from École Normale Supérieure in Lyon, SynopsX gathers various french projects in the fields of history and literary studies.

Contributors are all engaged in different projects but all share the same conception about what should be what we call an "instrumented corpus" :

Saying that, we mean :
- corpus you can more than publish, but expose on the web
- giving to the researcher or to visitors tools to explore and visualise the datas
- and text distribution that allow you to enrich and link the data on the Linked Open Data

The scope of SynopsX is on the one hand to help a single researcher to easily publish, explore and expose their XML data, and on the other hand for ITs teams to collaborate, mutualize and genericize their efforts. The project is candidate to join the facilities offered to researchers in arts and humanities by the TGIR Huma-Num.

- the TGIR Huma-Num http://www.huma-num.fr is a very large facility which aims to facilitate the digital turn in humanities and social sciences.

---

# why SynopsX ?
### (Human factors)

## .red[collaborate]
- research by projects
- code quality & best practice

## .red[sharing]
- don’t reinvent the wheel
- sustainability

## .red[generalize]
- maintainability
- reusability

---

# why SynopsX ?
### Tradition application architecture

![Tradi](./images/xmlStackTradiBis.svg)

???
Various approaches have been proposed to publish TEI corpora on line, but no standard software solution has emerged yet. As a possible next step after the markup of an edition, publication is still a difficult issue for many projects in Digital humanities.

When it comes to publish XML data on the web, you often need to use mixed technologies.
MySQL, PHP, W3C recommandations for HTML, CSS, JS...

---

# why SynopsX ?
### An uniform XML Stack (.red[a technical choice])

![Full XML](./images/xmlStackXQueryBis.svg)


---
name: part2
template: inverse
class: middle center

# .red[2.] A quick tour into XML database

---

# What is an XML database ?

Various solutions have been developped to use XML data
### Flat storage of XML files
### Use of relationnal databases
### Native storage of XML data in native XML systems

???
As you may know, various solutions have been developped to use XML data
- flat storage of XML files
- use of relationnal databases
- native storage of XML data in native XML systems

Flat storage is the far most simple solution. The full XML document stands for the main entity, inner structures playing no role.
This solution can be implemented with any file sytem. If the storage is unexpensive and efficient, some others tasks as search requires access to the inner structures of the document and then becomes prohibitives.

XML data can also be stored into relationnal databases. Thus it can benefit from indexing fonctionnalities, trading and query optimisation offered by these systems.
Thus as XML are semi-structured data, the conversion to a relational model is not either efficient nor always possible because of the significant differences inherent to their respective models.
These conversions generaly implies costfull joints for requests.

---

# What is an XML database ?

### Preserve XML structures
### Store XML using Schema specification
### Indexing XML data structures
### Allow document access throught XML techs (XPath, XQuery, etc. )

???

Native XML storage have the advantage to preserve XML document structures (elements, attributes, entities).
They can store XML documents using the Schema specification.
They allow document access throught XML technologies as XPath, XQuery, etc.

cf. http://www.rpbourret.com/xml/ProdsNative.htm

As they were specialy conceived to deal with XML data, native XML database have the advantage not to require any conversion operations.
Storage techniques and treatment of request in use with XML database are often more efficient than those based on flat file storage or relational databases.

Many indexes facilitates access to structure and data.
And fonctionnalities usually follows XML standard conformance and standard implementation ; especially XSL, XProc, Xforms, XLink, etc.

---

# The [BaseX](http://basex.org/) components and APIs

![BaseXserver](./images/basexAPIs.svg)

???
You can connect BaseX coponents to work in many different ways.
- Use the BaseX Gui
- Use the BaseX client
- Use the BaseX serveur
- Work with Oxygen by webdav
- Access your data with HTTP
- Access your data with REST

So you can create a database
- locally : via BaseX GUI ; via le client BaseX
- remotely : via cURL ; via BaseX DBA

Request data
- locally : via BaseX GUI ; via le client BaseX
- remotely : via cURL ; via BaseX REST

Build web services, or web applications
- with RESTXQ : link an url to an XQuery function

---

# Access to your data with an XML database
(demo)

---

# What is RESTXQ ?

### like Java's JAX-RS API
### proposed specification by [Adam Retter](http://www.adamretter.org.uk)
### based on HTTP protocol ([RFC7230](http://tools.ietf.org/html/rfc7230), [RFC7232](http://tools.ietf.org/html/rfc7232), [RFC7233](http://tools.ietf.org/html/rfc7233), [RFC7234](http://tools.ietf.org/html/rfc7234), [RFC7235](http://tools.ietf.org/html/rfc7235) )

---

# RESTXQ
(demo)

???
- Show a path-annotated function that execute the same query
- Go to the path
- We conclude we've build a full publication based on this mecanism, SynopsX

---
name: part3
template: inverse
class: middle center

# .red[3.] SynopsX inside

---

# The Workshop usecase

### Show a full example website with SynopsX
### Starting from an incomplete version
### Build the missing features

If you kwnow very well XQuery, you can work with your own data.

???
# The workshop usecase
- Show the full example website
- Explain that we will start from a downgraded version and build the missing features in order to rebuild the example website

---

# .red[Ex :] SynopsX installation (Linux and Mac OS)
### Download :
https://raw.githubusercontent.com/synopsx/synopsx/master/install.sh
### In a terminal run `bash install.sh`
### In a terminal run `/opt/basex/bin/basexhttp`
### In an other terminal run `/opt/basex/bin/basexgui`

BaseX version 8 needs Java > 7. Install the Java Development Kit version 8 :
http://www.oracle.com/technetwork/java/javase/downloads/index.html

---

# Development principles

## .red[Keep it simple] !
- a lightweight framework
- easily accessible

## .red[Fully customizable]
- user defined resources and representations
- content model liberty (since XML)
- full choice of URI scheme
- user-modifiable inheritance mechanism

## .red[MVC]
- separation of content and rendering
- [nearly] full templating mechanism (mappings)

???
As far it’s XML, you can work and mix any kind of data (TEI, EAD, MARC XML, etc.)

Vs Omeka or any other CMS, you can freely choose your own URI scheme = LOD perspectives + for building API

Strict separation between data request and representations, so you can associate different representation with a same resource.

Coming with a [nearly] Full templating mechanism (mappings)


---

# Synops.red[X] transformation chain

![transformationChain](./images/synopsxInsideTer.svg)

---

# Synops.red[X] code hierarchy

#### `_restxq/` contains the resource functions
#### `files/` contains SynopsX static files
#### `mappings/` contains SynopsX mappings (from data to various output formats)
#### `models/` contains SynopsX models (functions to access data in various formats)
#### `templates/` contains SynopsX templates (for HTML templating, etc.)
#### `workspace/` contains YOUR OWN projects !

---

# Synops.red[X] project hierarchy

### .red[is the same] !

```
_restxq/
files/
mappings/
models/
templates/
workspace/
--project1
-- -- _restxq/
-- -- mappings/
-- -- models/
-- -- templates/
--project2
--etc.
```

???
Is the same !
Explain heritage

---

# .red[Ex :] A Pedagogic project

### Download the code and the XML file
- http://github.com/synopsx/TEI2015
### Create the project
- http://localhost:8984/synopx
### Open the code in an editor
- `workspace/TEI2015/_restxq/`
### Access some URLs
### See the work to be done

???
# Pedagogic project installation
### Make them install the pedagogic project (the downgraded version of the exemple project).
### download the code and the XML file
### create the database
### open the code in an editor
### go to http://localhost:8984/TEI2015Workshop
### go to http://localhost:8984/example
### go to http://localhost:8984/example/letters
### go to http://localhost:8984/TEI2015Workshop/letters
### See the work to be done

---
# .red[Ex :] Create your first resources functions

### Create your own simple resource function with RESTXQ

```
  xquery version "3.0" ;
  module namespace demo = 'demo' ;
  declare default function namespace 'demo' ;
  (:~
   : resource function demo
   :)
  declare
    %restxq:path('/demo')
    %rest:produces('text/html')
    %output:method('html')
    %output:html-version('5.0')
  function titres() {
    <p>Hello World !</p>
    };
```

---

# .red[Ex :] Upgrade the TEI2015 project

### Add somme XQuery treatment for persName
### Add an HTML ressource for an Index
### Add a JSON ressource for an index

---

# Synops.red[X] transformation chain

![transformationChain](./images/synopsxInsideTer.svg)

---

# Synops.red[X] heritage

![heritage](./images/heritage.svg)

---

## Synops.red[X] resource functions (`restxq/`)

in `restxq/`
- URI associated with an XQuery function
- User defined URI scheme
- [RESTXQ](http://docs.basex.org/wiki/RESTXQ)

???
Contains one resource function for the web application.

Resource as entended by the W3C : anything ! Here any resource accessible from the application. It means an URI associated with an XQuery function.

With RESTXQ you can serve the content you want at the URI you choose.

---

## Synops.red[X] models functions (`models/`)

queryTei($queryParams)

$meta :=    map{}
            _a map_

$content := map(*)*
            _a map sequence_

Donner un exemple de liste de textes


## Synops.red[X] function construction

getTEIItems($queryParams)
          db:open('...')//tei:TEI[predicate]

## SynopsX mapping item

---

# Questions .red[?]

https://github.com/synopsx
![follow us on Github](./images/githubSynopsx.svg)

---
name: last-page
template: inverse
class: center middle

## [Thanks a lot]() !

.footnote[[revenir au début](#index)]

</textarea>
<!--<script src="http://gnab.github.com/remark/downloads/remark-0.6.5.min.js" type="text/javascript"></script>-->
    <script src="js/remark-0.6.5.min.js" type="text/javascript"></script>
<script type="text/javascript">
  var hljs = remark.highlighter.engine;
</script>
<script src="remark.language.js" type="text/javascript"></script>
<script type="text/javascript">
  var slideshow = remark.create({
      highlightStyle: 'monokai',
      highlightLanguage: 'remark'
    }) ;
</script>

</body>
</html>
